<!DOCTYPE html>
<html>
<body>

<canvas id = "ctx" width="640" height="480" style="border:1px solid #000000;"></canvas>

<script>
// Variable declarations
var mouse = {
   x:undefined,
   y:undefined
}
// Coordinates for placing the cards
var cardGrid = {
  cardWidth:80,
  cardLength:120,
  col1x:25,
  col2x:125,
  col3x:225,
  col4x:325,
  col5x:425,
  row1y:50,
  row2y:190,
  row3y:330,
  padxy:2,
  padwl:4,
  padx:15,
  pos1:35,
  pos2:45,
  pos3:65,
  pos4:80,
  pos5:95
};
//  Hit box logic	
var selected = {
  card1:false,
  card2:false,
  card3:false,
  card4:false,
  card5:false,
  card6:false,
  card7:false,
  card8:false,
  card9:false,
  card10:false,
  card11:false,
  card12:false,
  card13:false,
  card14:false,
  card15:false,
  full:0
};

var displayed = {
  card1: true,
  card2: true,
  card3: true,
  card4: true,
  card5: true,
  card6: true,
  card7: true,
  card8: true,
  card9: true,
  card10:true,
  card11:true,
  card12:true,
  card13:false,
  card14:false,
  card15:false,
};

var hint = {
  card1: false,
  card2: false,
  card3: false,
  card4: false,
  card5: false,
  card6: false,
  card7: false,
  card8: false,
  card9: false,
  card10:false,
  card11:false,
  card12:false,
  card13:false,
  card14:false,
  card15:false,
};

var uiElements = {
  bannerX:140,
  bannerY:10,
  bannerW:300,
  bannerL:25,
  bannerTextX:200,
  bannerTextY:25,
   
  quitButtonX:600,
  quitButtonY:10,
  quitButtonW:20,
  quitButtonL:20,
  quitButtonTextX:607,
  quitButtonTextY:24,
  
  submitButtonX:515,
  submitButtonY:250,
  submitButtonW:100,
  submitButtonL:50,
  submitButtonTextX:550,
  submitButtonTextY:275,
   
  hintButtonX:515,
  hintButtonY:325,
  hintButtonW:100,
  hintButtonL:50,
  hintButtonTextX:555,
  hintButtonTextY:350,
  difficultyButtonX:515,
  difficultyButtonY:400,
  difficultyButtonW:100,
  difficultyButtonL:50,
  difficultyButtonTextX:525,
  difficultyButtonTextY:425,
  
  pad:5

};
// End Variable declaration

// Begin Functions	
window.addEventListener("click", function(event) {
  mouse.x = event.x,        
  mouse.y = event.y
  var width = 80;
  var length = 120;	
  whichCards(mouse.x, mouse.y, width, length);	    	
  //if there is a click fire off all these functions which represent all off the selectable
  // elements in the game
  cardOne();
  cardTwo();	
  cardThree();	
  cardFour();
  cardFive();
  cardSix();
  cardSeven();
  cardEight();
  cardNine();
  cardTen();
  cardEleven();
  cardTwelve();
  if (playSurface.length === 15) {
		cardThirteen();
		cardFourteen();
		cardFifteen();
  };
  hintButton(mouse.x, mouse.y);
  quitButton(mouse.x, mouse.y);
  difficultyButton(mouse.x, mouse.y);
  submitButton(mouse.x, mouse.y, playSurface);
});
 
// creating a deck of cards based on these four different characteristics or suits.

//LoadImages

createDeck = function () {

  var symbol = [ "diamond", "squiggle", "oval"];
  var color = [ "red", "green", "purple"];
  var shading = [ "solid", "striped", "open"];
  var quantity = [ 1, 2, 3];

// needed for each of the loops.  Each for loop is like a power multiplier  in this case 3 to the 4th power or 81 loops
// Leaving these in and commented out as I will be porting this to other scripting languages.
//var i = 0;  For the symbols on the card
//var j = 0;  For the color of the symbols on the card
//var k = 0;  For the shading of the symbols on the card
//var l = 0;  For the quantity of symbols on the card

//  Creating the deck <Start> ------------------------------------------------------------
// deck array
  var deck = [];
  var m = 0;  

//  looping structure to create the deck of cards
  for (let i = 0; i < symbol.length; i++) {
    for (let j = 0; j < color.length; j++) { 
      for (let k = 0; k < shading.length; k++) {
        for (let l = 0; l < quantity.length; l++) {
          deck[m] = {symbol: symbol[i], color:color[j], shading: shading[k], quantity: quantity[l], cardID : m+1, hint:false, displayed:false, slot:0, selected:false}; 
					// DEBUG output to make sure this works
					//console.log((m+1) + " " + symbol[i] + " and " + color[j] + " and " + shading[k] + " and " + quantity[l]);
					//console.log((m+1) + " " + deck[m].symbol + ", "+ deck[m].color + ", "+ deck[m].shading + ", "+ deck[m].quantity);
		  		m++;
				}
	  	}
    }
  }

  return deck;
};

shuffleDeck = function (deckMaster) {
  let shuffled = deckMaster.slice(0);
  var j, x, i;
  for (i = shuffled.length - 1; i > 0; i--) {
    j = Math.floor(Math.random() * (i + 1));
    x = shuffled[i];
    shuffled[i] = shuffled[j];
    shuffled[j] = x;
  }
  return shuffled;
}


createTable = function (playDeck) {
  //create initial table plateau of 12 dealt cards
  var plateau = [];
	
  for ( let cards = 0; cards < 12; cards++) {
		plateau[cards] = playDeck.pop();
		plateau[cards].slot = cards;
  };
  return plateau;
};


// noMatch is used when creating a new playsurface
//isMatch is used when determining if the three selected and submitted cards are a match 
noMatch = function (playSurface) {
  // clearing the hint data
  for (let i=1; i<16; i++){
    let clearHints = "card" + (i);
	hint[clearHints] = false;
  }
  // complicated nesting for loops to find matches	  
  for (let i = 0; i < (playSurface.length - 2); i++) {
		for (let j = i+1; j < (playSurface.length - 1); j++) {
	  	for (let k = j+1; k < playSurface.length; k++) {
	   		symbolMatched = 0;
				colorMatched = 0;
				shadingMatched = 0;
				quantityMatched = 0;
				weHaveASet = 0;
	    		    		
	    	// Are the symbols all the same or all different?
				if (playSurface[i].symbol === playSurface[j].symbol && playSurface[i].symbol === playSurface[k].symbol) {
		  		symbolMatched = 1;
				} else if ((playSurface[i].symbol !== playSurface[j].symbol) && (playSurface[i].symbol !== playSurface[k].symbol) && (playSurface[j].symbol !== playSurface[k].symbol)) {
					symbolMatched = 1;
				} else { 
			  	symbolMatched = 0;
				}
				// Now check the colors		
				if (playSurface[i].color === playSurface[j].color && playSurface[i].color === playSurface[k].color) {
		  		colorMatched = 1;
				} else if ((playSurface[i].color !== playSurface[j].color) && (playSurface[i].color !== playSurface[k].color) && (playSurface[j].color !== playSurface[k].color)) {
					colorMatched = 1;
				} else { 
					colorMatched = 0;
				}
				// Now the check the shading
				if (playSurface[i].shading === playSurface[j].shading && playSurface[i].shading === playSurface[k].shading) {
		  		shadingMatched = 1;
				} else if ((playSurface[i].shading !== playSurface[j].shading) && (playSurface[i].shading !== playSurface[k].shading) && (playSurface[j].shading !== playSurface[k].shading)) {
					shadingMatched = 1;
				} else { 
					shadingMatched = 0;
				}
				// finally the quantity of symbols
				if (playSurface[i].quantity === playSurface[j].quantity && playSurface[i].quantity === playSurface[k].quantity) {
		  		quantityMatched = 1;
				} else if ((playSurface[i].quantity !== playSurface[j].quantity) && (playSurface[i].quantity !== playSurface[k].quantity) && (playSurface[j].quantity !== playSurface[k].quantity)) {
					quantityMatched = 1;
				} else { 
					quantityMatched = 0;
				}
				// Now checking if we have a set
				if (4 === (symbolMatched + colorMatched + shadingMatched + quantityMatched)) {
		  		weHaveASet = 1;
		  	// saving the set for the hint buttons.
		  		let resultI = "card" + (i + 1);
		  		let resultJ = "card" + (j + 1);
		  		let resultK = "card" + (k + 1);
		  		hint[resultI] = true;
		  		hint[resultJ] = true;
		  		hint[resultK] = true;
		  		// DEBUG code
		  		//console.log(hint.card1 + " " + hint.card2 + " " + hint.card3 + " " + hint.card4 + " " + hint.card5 + " " + hint.card6 + " " + hint.card7 + " " + hint.card8 + " " + hint.card9 + " " + hint.card10 + " " + hint.card11 + " " + hint.card12);
		  		//console.log ( " \n\nWe have a Set!!: i = " + i + " j = " + j + " k = " + k + " symbol: " + symbolMatched + " color: " + colorMatched + " shading: " + shadingMatched + " quantity: " + quantityMatched + "\n");
		  		//console.log((1) + " " + playSurface[i].symbol + ", "+ playSurface[i].color + ", "+ playSurface[i].shading + ", "+ playSurface[i].quantity);
		  		//console.log((2) + " " + playSurface[j].symbol + ", "+ playSurface[j].color + ", "+ playSurface[j].shading + ", "+ playSurface[j].quantity);
		  		//console.log((3) + " " + playSurface[k].symbol + ", "+ playSurface[k].color + ", "+ playSurface[k].shading + ", "+ playSurface[k].quantity);
	      	// if we have a set then no need to do anything else.  Break out of this loop.
		  		return weHaveASet;
				} else {
					weHaveASet = 0;
					//DEBUG code
					//console.log("nope");
					//console.log ( " \nNo Set: i = " + i + " j = " + j + " k = " + k + " symbol: " + symbolMatched + " color: " + colorMatched + " shading: " + shadingMatched + " quantity: " + quantityMatched);
					//console.log((1) + " " + playSurface[i].symbol + ", "+ playSurface[i].color + ", "+ playSurface[i].shading + ", "+ playSurface[i].quantity);
					//console.log((2) + " " + playSurface[j].symbol + ", "+ playSurface[j].color + ", "+ playSurface[j].shading + ", "+ playSurface[j].quantity);
					//console.log((3) + " " + playSurface[k].symbol + ", "+ playSurface[k].color + ", "+ playSurface[k].shading + ", "+ playSurface[k].quantity);
				};
	  	}; // end of k for loop
		}; // end of j for loop
  }; // end of i for loop
  return weHaveASet;
}; //end of the function

//isMatch

isMatch = function (submitted) {
  // clearing the hint data
  // complicated nesting for loops to find matches	  
  for (let i = 0; i < (submitted.length - 2); i++) {
		for (let j = i+1; j < (submitted.length - 1); j++) {
	  	for (let k = j+1; k < submitted.length; k++) {
	   		symbolMatched = 0;
				colorMatched = 0;
				shadingMatched = 0;
				quantityMatched = 0;
				weHaveASet = 0;
	    	// Are the symbols all the same or all different?
				if (submitted[i].symbol === submitted[j].symbol && submitted[i].symbol === submitted[k].symbol) {
		  		symbolMatched = 1;
				} else if ((submitted[i].symbol !== submitted[j].symbol) && (submitted[i].symbol !== submitted[k].symbol) && (submitted[j].symbol !== submitted[k].symbol)) {
					symbolMatched = 1;
				} else { 
			  	symbolMatched = 0;
				}
				// Now check the colors		
				if (submitted[i].color === submitted[j].color && submitted[i].color === submitted[k].color) {
		  		colorMatched = 1;
				} else if ((submitted[i].color !== submitted[j].color) && (submitted[i].color !== submitted[k].color) && (submitted[j].color !== submitted[k].color)) {
					colorMatched = 1;
				} else { 
					colorMatched = 0;
				}
				// Now the check the shading
				if (submitted[i].shading === submitted[j].shading && submitted[i].shading === submitted[k].shading) {
		  		shadingMatched = 1;
				} else if ((submitted[i].shading !== submitted[j].shading) && (submitted[i].shading !== submitted[k].shading) && (submitted[j].shading !== submitted[k].shading)) {
					shadingMatched = 1;
				} else { 
					shadingMatched = 0;
				}
				// finally the quantity of symbols
				if (submitted[i].quantity === submitted[j].quantity && submitted[i].quantity === submitted[k].quantity) {
		  		quantityMatched = 1;
				} else if ((submitted[i].quantity !== submitted[j].quantity) && (submitted[i].quantity !== submitted[k].quantity) && (submitted[j].quantity !== submitted[k].quantity)) {
					quantityMatched = 1;
				} else { 
					quantityMatched = 0;
				}
				// Now checking if we have a set
				if (4 === (symbolMatched + colorMatched + shadingMatched + quantityMatched)) {
		  		weHaveASet = 1;
		  		//clearhints
		  		for (let i=1; i<16; i++){
    				let clearHints = "card" + (i);
						hint[clearHints] = false;
  				};
					dealCards(submitted);
					console.log("Score");
					continueGame();
					
 		  		} else {
						weHaveASet = 0;
						//flash the submit button
						flashSubmitButton();
				  };
	  	}; // end of k for loop
		}; // end of j for loop
  }; // end of i for loop
  return weHaveASet;
}; //end of the function

flashSubmitButton = function () {
  var CTX = document.getElementById("ctx").getContext("2d");
	CTX.beginPath();
  CTX.strokeStyle="Red";
  CTX.lineWidth=6;
  CTX.rect(uiElements.submitButtonX, uiElements.submitButtonY, uiElements.submitButtonW, uiElements.submitButtonL);
  CTX.stroke();
  CTX.closePath();
  CTX.beginPath();
  CTX.strokeStyle="Blue";
  CTX.lineWidth=6;
  CTX.rect(uiElements.submitButtonX, uiElements.submitButtonY, uiElements.submitButtonW, uiElements.submitButtonL);
  CTX.fillText("Submit", uiElements.submitButtonTextX, uiElements.submitButtonTextY);
  CTX.stroke();
  CTX.closePath();
};


dealCards = function(submitted) {
	// Setting variables
	let slot1 = submitted[0].slot;				
	let slot2 = submitted[1].slot;
	let slot3 = submitted[2].slot;
	//changing the cards from the ones submitted to ones from the deck
	playSurface[slot1] = playDeck.pop();
	playSurface[slot1].slot = slot1;
	 
	playSurface[slot2] = playDeck.pop();
	playSurface[slot2].slot = slot2;
	
	playSurface[slot3] = playDeck.pop();
	playSurface[slot3].slot = slot3;
};
	
startGame = function (playSurface, playDeck){
  var noSets = noMatch(playSurface);
  let i = 0;
  console.log("Game Started");
	while (noSets === 0) {
    //masterDeck = createDeck();
			for (let cards = 69; cards < 81; cards++) {
				playDeck[cards]	= playSurface.pop();
				playDeck[cards].slot = -1;
			//	console.log("Table cards: " + playSurface.length + " Deck cards:" + playDeck.length);
			}	
		playDeck = shuffleDeck(playDeck);
		playSurface = createTable(playDeck);
		noSets = noMatch(playSurface);
		i = i+1;
		console.log(noSets + " redeal " + i);		
  };
  
return playSurface;	
};

continueGame = function (){
  var noSets = noMatch(playSurface);
  let i = 0;
  console.log("New cards ");
	while (noSets === 0) {
    //masterDeck = createDeck();
    let limiter = playDeck.length
    for (let cards = limiter - 12; cards < limiter; cards++) {
			playDeck[cards]	= playSurface.pop();
			playDeck[cards].slot = -1;
			//	console.log("Table cards: " + playSurface.length + " Deck cards:" + playDeck.length);
		}	
		playDeck = shuffleDeck(playDeck);
		playSurface = createTable(playDeck);
		noSets = noMatch(playSurface);
		i = i+1;
		console.log(noSets + " redeal " + i);		
  };
  
  return;	
};

drawCards = function (playSurface) {
  for (let i = 0; i < playSurface.length; i++) {
	createCard(playSurface);
  };	
};	

createGameUI = function (){
  // create the game screen elements
  var CTXG = document.getElementById("ctx").getContext("2d");
  //the instruction banner
  CTXG.beginPath();
  CTXG.strokeStyle="Purple";
  CTXG.lineWidth=4;
  CTXG.rect(uiElements.bannerX, uiElements.bannerY, uiElements.bannerW, uiElements.bannerL);
  CTXG.fillText("Select Three Cards that make a Set", uiElements.bannerTextX, uiElements.bannerTextY);
  CTXG.stroke();
  CTXG.closePath();

//Quit button
  CTXG.beginPath();
  CTXG.strokeStyle="Red";
  CTXG.lineWidth=6;
  CTXG.rect(uiElements.quitButtonX, uiElements.quitButtonY, uiElements.quitButtonW, uiElements.quitButtonL);
  CTXG.fillText("X", uiElements.quitButtonTextX, uiElements.quitButtonTextY);
  CTXG.stroke();
  CTXG.closePath();

//Deck graphic
  CTXG.beginPath();
  CTXG.fillRect(530, 88, 80 , 120);
  CTXG.clearRect(532, 90, 76 , 116);
  CTXG.fillRect(524, 94, 80 , 120);
  CTXG.clearRect(526, 96, 76 , 116);
  CTXG.fillRect(518, 100, 80 , 120);
  CTXG.clearRect(520, 102, 76 , 116);
  CTXG.fillText("Draw Deck", 530, 140);
  CTXG.fillText("Cards Left:", 530, 160);
  CTXG.fillText(playDeck.length, 530, 180); 
  CTXG.stroke();
  CTXG.closePath();

//Submit button
  CTXG.beginPath();
  CTXG.strokeStyle="Blue";
  CTXG.lineWidth=6;
  CTXG.rect(uiElements.submitButtonX, uiElements.submitButtonY, uiElements.submitButtonW, uiElements.submitButtonL);
  CTXG.fillText("Submit", uiElements.submitButtonTextX, uiElements.submitButtonTextY);
  CTXG.stroke();
  CTXG.closePath();
	
//Hint button
  CTXG.beginPath();
  CTXG.lineWidth=6;
  CTXG.rect(uiElements.hintButtonX,uiElements.hintButtonY, uiElements.hintButtonW, uiElements.hintButtonL);
  CTXG.fillText("Hint", uiElements.hintButtonTextX, uiElements.hintButtonTextY);
  CTXG.stroke();
  CTXG.closePath();

//Difficulty button
  CTXG.beginPath();
  CTXG.lineWidth=6;
  CTXG.rect(uiElements.difficultyButtonX,uiElements.difficultyButtonY, uiElements.difficultyButtonW, uiElements.difficultyButtonL);
  CTXG.fillText("Difficulty: Standard", uiElements.difficultyButtonTextX, uiElements.difficultyButtonTextY);
  CTXG.stroke();
  CTXG.closePath();

};

 
quitButton = function (x,y) {
  if ((x >= uiElements.quitButtonX - uiElements.pad && x <= (uiElements.quitButtonX + uiElements.quitButtonW + (uiElements.pad * 2))) && (y >= uiElements.quitButtonY - uiElements.pad && y <= (uiElements.quitButtonY + uiElements.quitButtonL + (uiElements.pad * 2)))) {
		location.reload(true);	
  }
};

submitButton = function (x,y, playSurface) {
  if ((x >= uiElements.submitButtonX - uiElements.pad && x <= uiElements.submitButtonX + uiElements.submitButtonW + (uiElements.pad * 2)) && (y >= uiElements.submitButtonY - uiElements.pad && y <= uiElements.submitButtonY + uiElements.submitButtonL + (uiElements.pad * 2))) {
		console.log("submitButton");
		if (selected.full === 3) {
			var submitted = [];
			let j = 0;
			for(let i = 1; i < 13; i++) {
				let count = "card" + i;
				if (selected[count] === true) {
					console.log (i-1);
					// undefined? how to fix?  
					submitted[j] = playSurface[i-1];
					j++;
				}
			}
			console.log("submitted");
			//Is Match function
			isMatch(submitted);
			refreshScreen();
		} else {
				console.log("Please Select Three cards");
		}
	}
};

hintButton = function (x,y) {
  if ((x >= uiElements.hintButtonX - uiElements.pad && x <= uiElements.hintButtonX + uiElements.hintButtonW + (uiElements.pad * 2)) && (y >= uiElements.hintButtonY - uiElements.pad && y <= uiElements.hintButtonY + uiElements.hintButtonL + (uiElements.pad * 2))) {
		console.log("hintButton");
		for (let i=1; i<16; i++){
    	let hints = "card" + (i);
			if (hint[hints] === true) {
				// find the card's xy and flash the card's border Red then back to either black or Green)
				console.log(hints + ":" + hint[hints]);
			}
  	}
  }
};

difficultyButton = function (x,y) {
  if ((x >= uiElements.difficultyButtonX - uiElements.pad && x <= uiElements.difficultyButtonX + uiElements.difficultyButtonW + (uiElements.pad * 2)) && (y >= uiElements.difficultyButtonY - uiElements.pad && y <= uiElements.difficultyButtonY + uiElements.difficultyButtonL + (uiElements.pad * 2))) {
		console.log("difficultyButton");
		
  }
};

//What image should I use?
// this checks the card's data and loads the right image based on that data  
displayGraphic = function (playSurface, i) {
  var cardImage = "";

  if ( playSurface[i].color === "red" && playSurface[i].symbol === "diamond" && playSurface[i].shading === "solid") {
	cardImage = "resources/RedDiamondSolid.jpg";
	return cardImage;	
  } else if ( playSurface[i].color === "red" && playSurface[i].symbol === "diamond" && playSurface[i].shading === "striped") {
	  cardImage = "resources/RedDiamondStriped.jpg";
	  return cardImage;	
  } else if ( playSurface[i].color === "red" && playSurface[i].symbol === "diamond" && playSurface[i].shading === "open") {
	  cardImage = "resources/RedDiamondOpen.jpg";
	  return cardImage;	
  } else if ( playSurface[i].color === "red" && playSurface[i].symbol === "squiggle" && playSurface[i].shading === "solid") {
	  cardImage = "resources/RedSquiggleSolid.jpg";
	  return cardImage;	
  } else if ( playSurface[i].color === "red" && playSurface[i].symbol === "squiggle" && playSurface[i].shading === "striped") {
	  cardImage = "resources/RedSquiggleStriped.jpg";
	  return cardImage;	
  } else if ( playSurface[i].color === "red" && playSurface[i].symbol === "squiggle" && playSurface[i].shading === "open") {
	  cardImage = "resources/RedSquiggleOpen.jpg";
	  return cardImage;	
  } else if ( playSurface[i].color === "red" && playSurface[i].symbol === "oval" && playSurface[i].shading === "solid") {
	  cardImage = "resources/RedOvalSolid.jpg";
	  return cardImage;	
  } else if ( playSurface[i].color === "red" && playSurface[i].symbol === "oval" && playSurface[i].shading === "striped") {
	  cardImage = "resources/RedOvalStriped.jpg";
	  return cardImage;	
  } else if ( playSurface[i].color === "red" && playSurface[i].symbol === "oval" && playSurface[i].shading === "open") {
	  cardImage = "resources/RedOvalOpen.jpg";
	  return cardImage;	
  } else if ( playSurface[i].color === "green" && playSurface[i].symbol === "diamond" && playSurface[i].shading === "solid") {
	  cardImage = "resources/GreenDiamondSolid.jpg";
	  return cardImage;	
  } else if ( playSurface[i].color === "green" && playSurface[i].symbol === "diamond" && playSurface[i].shading === "striped") {
	  cardImage = "resources/GreenDiamondStriped.jpg";
	  return cardImage;	
  } else if ( playSurface[i].color === "green" && playSurface[i].symbol === "diamond" && playSurface[i].shading === "open") {
	  cardImage = "resources/GreenDiamondOpen.jpg";
	  return cardImage;	
  } else if ( playSurface[i].color === "green" && playSurface[i].symbol === "squiggle" && playSurface[i].shading === "solid") {
	  cardImage = "resources/GreenSquiggleSolid.jpg";
	  return cardImage;	
  } else if ( playSurface[i].color === "green" && playSurface[i].symbol === "squiggle" && playSurface[i].shading === "striped") {
	  cardImage = "resources/GreenSquiggleStriped.jpg";
	  return cardImage;	
  } else if ( playSurface[i].color === "green" && playSurface[i].symbol === "squiggle" && playSurface[i].shading === "open") {
	  cardImage = "resources/GreenSquiggleOpen.jpg";
	  return cardImage;	
  } else if ( playSurface[i].color === "green" && playSurface[i].symbol === "oval" && playSurface[i].shading === "solid") {
	  cardImage = "resources/GreenOvalSolid.jpg";
	  return cardImage;	
  } else if ( playSurface[i].color === "green" && playSurface[i].symbol === "oval" && playSurface[i].shading === "striped") {
	  cardImage = "resources/GreenOvalStriped.jpg";
	  return cardImage;	
  } else if ( playSurface[i].color === "green" && playSurface[i].symbol === "oval" && playSurface[i].shading === "open") {
	  cardImage = "resources/GreenOvalOpen.jpg";
	  return cardImage;	
  } else if ( playSurface[i].color === "purple" && playSurface[i].symbol === "diamond" && playSurface[i].shading === "solid") {
	  cardImage = "resources/PurpleDiamondSolid.jpg";
	  return cardImage;	
  } else if ( playSurface[i].color === "purple" && playSurface[i].symbol === "diamond" && playSurface[i].shading === "striped") {
	  cardImage = "resources/PurpleDiamondStriped.jpg";
	  return cardImage;	
  } else if ( playSurface[i].color === "purple" && playSurface[i].symbol === "diamond" && playSurface[i].shading === "open") {
	  cardImage = "resources/PurpleDiamondOpen.jpg";
	  return cardImage;	
  } else if ( playSurface[i].color === "purple" && playSurface[i].symbol === "squiggle" && playSurface[i].shading === "solid") {
	  cardImage = "resources/PurpleSquiggleSolid.jpg";
	  return cardImage;	
  } else if ( playSurface[i].color === "purple" && playSurface[i].symbol === "squiggle" && playSurface[i].shading === "striped") {
	  cardImage = "resources/PurpleSquiggleStriped.jpg";
	  return cardImage;	
  } else if ( playSurface[i].color === "purple" && playSurface[i].symbol === "squiggle" && playSurface[i].shading === "open") {
	  cardImage = "resources/PurpleSquiggleOpen.jpg";
	  return cardImage;	
  } else if ( playSurface[i].color === "purple" && playSurface[i].symbol === "oval" && playSurface[i].shading === "solid") {
	  cardImage = "resources/PurpleOvalSolid.jpg";
	  return cardImage;	
  } else if ( playSurface[i].color === "purple" && playSurface[i].symbol === "oval" && playSurface[i].shading === "striped") {
	  cardImage = "resources/PurpleOvalStriped.jpg";
	  return cardImage;	
  } else if ( playSurface[i].color === "purple" && playSurface[i].symbol === "oval" && playSurface[i].shading === "open") {
	  cardImage = "resources/PurpleOvalOpen.jpg";
	  return cardImage;	
  };
};

//Determining which cards are selected.
whichCards = function(x,y,cardW,cardL,full){
	
  if (((x >= cardGrid.col1x && x <= cardGrid.col1x + cardW) && (y >= cardGrid.row1y && y <= cardGrid.row1y + cardL)) && displayed.card1 === true) {
		console.log("card1");
		if (selected.card1 === false && selected.full < 3) {
	  	selected.card1 = true;
	  	selected.full = selected.full + 1;
		} else if (selected.card1 === true){
	    	selected.card1 = false;
	    	selected.full = selected.full - 1;
		} 
  } else if (((x >= cardGrid.col1x && x <= cardGrid.col1x + cardW) && (y >= cardGrid.row2y && y <= cardGrid.row2y + cardL)) && displayed.card2 === true) {
	  	console.log("card2");
	  	if (selected.card2 === false && selected.full < 3) {
	    	selected.card2 = true;
	    	selected.full = selected.full + 1;
	  	} else if (selected.card2 === true) {
	  		  selected.card2 = false;
	  		  selected.full = selected.full - 1;
	  	}  
  } else if (((x >= cardGrid.col1x && x <= cardGrid.col1x + cardW) && (y >= cardGrid.row3y && y <= cardGrid.row3y + cardL)) && displayed.card3 === true) {
	  	console.log("card3");
	  	if (selected.card3 === false && selected.full < 3) {
	    	selected.card3 = true;
	    	selected.full = selected.full + 1;
	  	} else if (selected.card3 === true) {
	  		  selected.card3 = false;
	  		  selected.full = selected.full - 1;
	 		}  
  } else if (((x >= cardGrid.col2x && x <= cardGrid.col2x + cardW) && (y >= cardGrid.row1y && y <= cardGrid.row1y + cardL)) && displayed.card4 === true) {
	 		console.log("card4");
	  	if (selected.card4 === false && selected.full < 3) {
	    	selected.card4 = true;
	    	selected.full = selected.full + 1;
	  	} else if (selected.card4 === true) {
	  	  	selected.card4 = false;
	  	  	selected.full = selected.full - 1;
	  	}  
  } else if (((x >= cardGrid.col2x && x <= cardGrid.col2x + cardW) && (y >= cardGrid.row2y && y <= cardGrid.row2y + cardL)) && displayed.card5 === true) {
	  	console.log("card5");
	  	if (selected.card5 === false && selected.full < 3) {
	    	selected.card5 = true;
	    	selected.full = selected.full + 1;
	  	} else if (selected.card5 === true) {
	  		  selected.card5 = false;
	  		  selected.full = selected.full - 1;
	  	}  
  } else if (((x >= cardGrid.col2x && x <= cardGrid.col2x + cardW) && (y >= cardGrid.row3y && y <= cardGrid.row3y + cardL)) && displayed.card6 === true) {
	  	console.log("card6");
	  	if (selected.card6 === false && selected.full < 3) {
	    	selected.card6 = true;
	    	selected.full = selected.full + 1;
	  	} else if (selected.card6 === true) {
	  	  	selected.card6 = false;
	  	  	selected.full = selected.full - 1;
	  	}  
  } else if (((x >= cardGrid.col3x && x <= cardGrid.col3x + cardW) && (y >= cardGrid.row1y && y <= cardGrid.row1y + cardL)) && displayed.card7 === true) {
	  	console.log("card7");
	  	if (selected.card7 === false && selected.full < 3) {
	    	selected.card7 = true;
	    	selected.full = selected.full + 1;
	  	} else if (selected.card7 === true) {
	  	  	selected.card7 = false;
	  	  	selected.full = selected.full - 1;
	  	}  
  } else if (((x >= cardGrid.col3x && x <= cardGrid.col3x + cardW) && (y >= cardGrid.row2y && y <= cardGrid.row2y + cardL)) && displayed.card8 === true) {
	  	console.log("card8");
	  	if (selected.card8 === false && selected.full < 3) {
	    	selected.card8 = true;
	    	selected.full = selected.full + 1;
	  	} else if (selected.card8 === true) {
		  		selected.card8 = false;
		  		selected.full = selected.full - 1;
	  	}  
  } else if (((x >= cardGrid.col3x && x <= cardGrid.col3x + cardW) && (y >= cardGrid.row3y && y <= cardGrid.row3y + cardL)) && displayed.card9 === true) {
	  	console.log("card9");
	  	if (selected.card9 === false && selected.full < 3) {
	    	selected.card9 = true;
	    	selected.full = selected.full + 1;
	  	} else if (selected.card9 === true) {
	  	  	selected.card9 = false;
	  	  	selected.full = selected.full - 1;
	  	}  
  } else if (((x >= cardGrid.col4x && x <= cardGrid.col4x + cardW) && (y >= cardGrid.row1y && y <= cardGrid.row1y + cardL)) && displayed.card10 === true) {
	  	console.log("card10");
	  	if (selected.card10 === false && selected.full < 3) {
	    	selected.card10 = true;
	    	selected.full = selected.full + 1;
	  	} else if (selected.card10 === true) {
	  	  	selected.card10 = false;
	  	  	selected.full = selected.full - 1;
	  	}  
  } else if (((x >= cardGrid.col4x && x <= cardGrid.col4x + cardW) && (y >= cardGrid.row2y && y <= cardGrid.row2y + cardL)) && displayed.card11 === true)  {
	  	console.log("card11");
	  	if (selected.card11 === false && selected.full < 3) {
	    	selected.card11 = true;
	    	selected.full = selected.full + 1;
	  	} else if (selected.card11 === true) {
	  	  	selected.card11 = false;
	  	  	selected.full = selected.full - 1;
	  	}   
  } else if (((x >= cardGrid.col4x && x <= cardGrid.col4x + cardW) && (y >= cardGrid.row3y && y <= cardGrid.row3y + cardL)) && displayed.card12 === true)  {
	  	console.log("card12");
	  	if (selected.card12 === false && selected.full < 3) {
	    	selected.card12 = true;
	    	selected.full = selected.full + 1;
	  	} else if (selected.card12 === true) {
	  	  	selected.card12 = false;
	  	  	selected.full = selected.full - 1;
	  	}   
  } else if (((x >= cardGrid.col5x && x <= cardGrid.col5x + cardW) && (y >= cardGrid.row1y && y <= cardGrid.row1y + cardL)) && displayed.card13 === true)  {
	  	console.log("card13");
	  	if (selected.card13 === false && selected.full < 3) {
	    	selected.card13 = true;
	    	selected.full = selected.full + 1;
	  	} else if (selected.card13 === true) {
	  	  	selected.card13 = false;
	  	  	selected.full = selected.full - 1;
	  	}   
  } else if (((x >= cardGrid.col5x && x <= cardGrid.col5x + cardW) && (y >= cardGrid.row2y && y <= cardGrid.row2y + cardL)) && displayed.card14 === true)  {
	  	console.log("card14");
	  	if (selected.card14 === false && selected.full < 3) {
	    	selected.card14 = true;
	    	selected.full = selected.full + 1;
	  	} else if (selected.card14 === true) {
	  	  	selected.card14 = false;
	  	  	selected.full = selected.full - 1;
	  	}   
  } else if (((x >= cardGrid.col5x && x <= cardGrid.col5x + cardW) && (y >= cardGrid.row3y && y <= cardGrid.row3y + cardL)) && displayed.card15 === true)  {
	  	console.log("card15");
	  	if (selected.card15 === false && selected.full < 3) {
	    	selected.card15 = true;
	    	selected.full = selected.full + 1;
	  	} else if (selected.card15 === true) {
	  	  	selected.card15 = false;
	  	  	selected.full = selected.full - 1;
	  	}  
  };
};
// hit box logic  Static values
// this varabile is declared also in the createCard function.  On of them should be removed

createCard = function (playSurface){
  var ctx = document.getElementById("ctx").getContext("2d");
 // Each of these functions is displaying on the screen the attributes of each card.		

  drawCardFrame = function(whichCard,x,y,w,l){
		let card = whichCard;
		if (card === true) {
	  	//set color to green	
	  	ctx.beginPath();
	  	ctx.strokeStyle="Green";
	  	ctx.lineWidth=10;
	  	ctx.strokeRect(x, y, w, l);
	  	ctx.stroke();
	  	ctx.closePath();
		} else {
				//set color to black
				ctx.beginPath();
				ctx.clearRect(x-5,y-5, w + 10, l+10);
				ctx.lineWidth=2;
				ctx.strokeStyle="#000000";
				ctx.strokeRect(x, y, w, l);
				ctx.stroke();
				ctx.closePath()
		};
  };
	
 //attempting to replace the if else statement in the cards for how many images ot display with this
 //function.
  numberOfShapes = function(shapes, images, x, y, cardWidth, cardLength, i) {
		if (shapes === 1) {
	  	cardImage.onload = function() {  
				ctx.drawImage(images, x + cardWidth/2 - cardGrid.padx, y + cardGrid.pos3 - cardGrid.padx);
	  	};
	  images.src = displayGraphic(playSurface,i);
		} else if (shapes === 2) {
			cardImage1.onload = function() {  
		  	ctx.drawImage(images, x + cardWidth/2 - cardGrid.padx, y + cardGrid.pos2 - cardGrid.padx);
		  	ctx.drawImage(images, x + cardWidth/2 - cardGrid.padx, y + cardGrid.pos4 - cardGrid.padx);
			};
			images.src = displayGraphic(playSurface,i);
		} else {
			cardImage.onload = function() {  
		  	ctx.drawImage(images, x + cardWidth/2 - cardGrid.padx, y + cardGrid.pos1 - cardGrid.padx);
		  	ctx.drawImage(images, x + cardWidth/2 - cardGrid.padx, y + cardGrid.pos3 - cardGrid.padx);
		  	ctx.drawImage(images, x + cardWidth/2 - cardGrid.padx, y + cardGrid.pos5 - cardGrid.padx);
			};	
	   	images.src = displayGraphic(playSurface,i);
		};
  };
		
		
clearCard = function (x,y,w,h) {
	ctx.clearRect(x,y,w,h);
	ctx.stroke();
};		
		
// each of these cardX functions has 2 main parts
// 1. draw the card frame based on whether or not the card is selected or not.  
//  this will be replaced with a card-face graphic at a later point
// 2. draw the correct images for the card data, such as two red filled ovals or one red open diamond		
  cardOne = function() {
    //drawing the card frame
    clearCard(cardGrid.col1x, cardGrid.row1y, cardGrid.cardWidth, cardGrid.cardLength);
    drawCardFrame(selected.card1, cardGrid.col1x, cardGrid.row1y, cardGrid.cardWidth, cardGrid.cardLength);
    //card data
    // An attempt to replace the precedding if else statement with a function.  Not working at the moment,
    //numberOfShapes(playSurface[0].quantity, cardImage1, cardGrid.col1x, cardGrid.row1y, cardGrid.cardWidth, cardGrid.cardLength, 0);	
    
    if (playSurface[0].quantity === 1) {
	  	var cardImage1 = new Image();
	  	cardImage1.onload = function() {  
				ctx.drawImage(cardImage1, cardGrid.col1x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row1y + cardGrid.pos3 - cardGrid.padx);
	  	};
	  cardImage1.src = displayGraphic(playSurface,0);
		} else if (playSurface[0].quantity === 2) {
			var cardImage1 = new Image();
			cardImage1.onload = function() {  
		  	ctx.drawImage(cardImage1, cardGrid.col1x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row1y + cardGrid.pos2 - cardGrid.padx);
		  	ctx.drawImage(cardImage1, cardGrid.col1x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row1y + cardGrid.pos4 - cardGrid.padx);
			};
		cardImage1.src = displayGraphic(playSurface,0);
		} else {
			var cardImage1 = new Image();
			cardImage1.onload = function() {  
		  	ctx.drawImage(cardImage1, cardGrid.col1x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row1y + cardGrid.pos1 - cardGrid.padx);
		  	ctx.drawImage(cardImage1, cardGrid.col1x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row1y + cardGrid.pos3 - cardGrid.padx);
		  	ctx.drawImage(cardImage1, cardGrid.col1x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row1y + cardGrid.pos5 - cardGrid.padx);
			};	
		cardImage1.src = displayGraphic(playSurface,0);
		};
  };
	
  cardTwo = function() {
	//drawing the card frame
	drawCardFrame(selected.card2, cardGrid.col1x, cardGrid.row2y, cardGrid.cardWidth, cardGrid.cardLength);
	//card data
	if (playSurface[1].quantity === 1) {
	  var cardImage2 = new Image();
	  cardImage2.onload = function() {  
	    ctx.drawImage(cardImage2, cardGrid.col1x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row2y + cardGrid.pos3 - cardGrid.padx);
	  };
	  cardImage2.src = displayGraphic(playSurface,1);
	} else if (playSurface[1].quantity === 2) {
		var cardImage2 = new Image();
		cardImage2.onload = function() {  
		  ctx.drawImage(cardImage2, cardGrid.col1x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row2y + cardGrid.pos2 - cardGrid.padx);
		  ctx.drawImage(cardImage2, cardGrid.col1x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row2y + cardGrid.pos4 - cardGrid.padx);
		};
		cardImage2.src = displayGraphic(playSurface,1);
	} else {
		var cardImage2 = new Image();
		cardImage2.onload = function() {  
		  ctx.drawImage(cardImage2, cardGrid.col1x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row2y + cardGrid.pos1 - cardGrid.padx);
		  ctx.drawImage(cardImage2, cardGrid.col1x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row2y + cardGrid.pos3 - cardGrid.padx);
		  ctx.drawImage(cardImage2, cardGrid.col1x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row2y + cardGrid.pos5 - cardGrid.padx);
		};	
		cardImage2.src = displayGraphic(playSurface,1);
	};
  };
	
  cardThree = function() {
	//drawing the card frame
	drawCardFrame(selected.card3, cardGrid.col1x, cardGrid.row3y, cardGrid.cardWidth, cardGrid.cardLength);
	//card data
	if (playSurface[2].quantity === 1) {
	  var cardImage3 = new Image();
	  cardImage3.onload = function() {  
		ctx.drawImage(cardImage3, cardGrid.col1x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row3y + cardGrid.pos3 - cardGrid.padx);
	  };
	  cardImage3.src = displayGraphic(playSurface,2);
	} else if (playSurface[2].quantity === 2) {
		var cardImage3 = new Image();
		cardImage3.onload = function() {  
		  ctx.drawImage(cardImage3, cardGrid.col1x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row3y + cardGrid.pos2 - cardGrid.padx);
		  ctx.drawImage(cardImage3, cardGrid.col1x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row3y + cardGrid.pos4 - cardGrid.padx);
		};
		cardImage3.src = displayGraphic(playSurface,2);
	} else {
		var cardImage3 = new Image();
		cardImage3.onload = function() {  
		  ctx.drawImage(cardImage3, cardGrid.col1x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row3y + cardGrid.pos1 - cardGrid.padx);
		  ctx.drawImage(cardImage3, cardGrid.col1x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row3y + cardGrid.pos3 - cardGrid.padx);
		  ctx.drawImage(cardImage3, cardGrid.col1x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row3y + cardGrid.pos5 - cardGrid.padx);
		};	
		cardImage3.src = displayGraphic(playSurface,2);
	};
  };
		
  cardFour = function() {
	//drawing the card frame
	drawCardFrame(selected.card4, cardGrid.col2x, cardGrid.row1y, cardGrid.cardWidth, cardGrid.cardLength);
	//card data
	if (playSurface[3].quantity === 1) {
	  var cardImage4 = new Image();
	  cardImage4.onload = function() {  
	    ctx.drawImage(cardImage4, cardGrid.col2x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row1y + cardGrid.pos3 - cardGrid.padx);
	  };
	  cardImage4.src = displayGraphic(playSurface,3);
	} else if (playSurface[3].quantity === 2) {
		var cardImage4 = new Image();
		cardImage4.onload = function() {  
		  ctx.drawImage(cardImage4, cardGrid.col2x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row1y + cardGrid.pos2 - cardGrid.padx);
		  ctx.drawImage(cardImage4, cardGrid.col2x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row1y + cardGrid.pos4 - cardGrid.padx);
		};
		cardImage4.src = displayGraphic(playSurface,3);
	} else {
		var cardImage4 = new Image();
		cardImage4.onload = function() {  
		  ctx.drawImage(cardImage4, cardGrid.col2x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row1y + cardGrid.pos1 - cardGrid.padx);
		  ctx.drawImage(cardImage4, cardGrid.col2x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row1y + cardGrid.pos3 - cardGrid.padx);
		  ctx.drawImage(cardImage4, cardGrid.col2x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row1y + cardGrid.pos5 - cardGrid.padx);
		};	
		cardImage4.src = displayGraphic(playSurface,3);
	};
  };
	
  cardFive= function() {
	//drawing the card frame
	drawCardFrame(selected.card5, cardGrid.col2x, cardGrid.row2y, cardGrid.cardWidth, cardGrid.cardLength);
	//card data
	if (playSurface[4].quantity === 1) {
	  var cardImage5 = new Image();
	  cardImage5.onload = function() {  
		ctx.drawImage(cardImage5, cardGrid.col2x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row2y + cardGrid.pos3 - cardGrid.padx);
	  };
	  cardImage5.src = displayGraphic(playSurface,4);
	} else if (playSurface[4].quantity === 2) {
		var cardImage5 = new Image();
		cardImage5.onload = function() {  
		  ctx.drawImage(cardImage5, cardGrid.col2x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row2y + cardGrid.pos2 - cardGrid.padx);
		  ctx.drawImage(cardImage5, cardGrid.col2x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row2y + cardGrid.pos4 - cardGrid.padx);
		};
		cardImage5.src = displayGraphic(playSurface,4);
	} else {
		var cardImage5 = new Image();
		cardImage5.onload = function() {  
		  ctx.drawImage(cardImage5, cardGrid.col2x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row2y + cardGrid.pos1 - cardGrid.padx);
		  ctx.drawImage(cardImage5, cardGrid.col2x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row2y + cardGrid.pos3 - cardGrid.padx);
		  ctx.drawImage(cardImage5, cardGrid.col2x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row2y + cardGrid.pos5 - cardGrid.padx);
		};	
		cardImage5.src = displayGraphic(playSurface,4);
	};
  };

  cardSix = function() {
	//drawing the card frame
    drawCardFrame(selected.card6, cardGrid.col2x, cardGrid.row3y, cardGrid.cardWidth, cardGrid.cardLength);
	//card data
	if (playSurface[5].quantity === 1) {
	  var cardImage6 = new Image();
	  cardImage6.onload = function() {  
		ctx.drawImage(cardImage6, cardGrid.col2x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row3y + cardGrid.pos3 - cardGrid.padx);
	  };
	  cardImage6.src = displayGraphic(playSurface,5);
	} else if (playSurface[5].quantity === 2) {
		var cardImage6 = new Image();
		cardImage6.onload = function() {  
		  ctx.drawImage(cardImage6, cardGrid.col2x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row3y + cardGrid.pos2 - cardGrid.padx);
		  ctx.drawImage(cardImage6, cardGrid.col2x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row3y + cardGrid.pos4 - cardGrid.padx);
		};
		cardImage6.src = displayGraphic(playSurface,5);
	} else {
		var cardImage6 = new Image();
		cardImage6.onload = function() {  
		  ctx.drawImage(cardImage6, cardGrid.col2x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row3y + cardGrid.pos1 - cardGrid.padx);
		  ctx.drawImage(cardImage6, cardGrid.col2x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row3y + cardGrid.pos3 - cardGrid.padx);
		  ctx.drawImage(cardImage6, cardGrid.col2x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row3y + cardGrid.pos5 - cardGrid.padx);
		};	
		cardImage6.src = displayGraphic(playSurface,5);
	};
  };

  cardSeven = function() {
	//drawing the card frame
	drawCardFrame(selected.card7, cardGrid.col3x, cardGrid.row1y, cardGrid.cardWidth, cardGrid.cardLength);
	//card data
	if (playSurface[6].quantity === 1) {
	  var cardImage7 = new Image();
	  cardImage7.onload = function() {  
		ctx.drawImage(cardImage7, cardGrid.col3x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row1y + cardGrid.pos3 - cardGrid.padx);
	  };
	 cardImage7.src = displayGraphic(playSurface,6);
	} else if (playSurface[6].quantity === 2) {
		var cardImage7 = new Image();
		cardImage7.onload = function() {  
		  ctx.drawImage(cardImage7, cardGrid.col3x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row1y + cardGrid.pos2 - cardGrid.padx);
		  ctx.drawImage(cardImage7, cardGrid.col3x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row1y + cardGrid.pos4 - cardGrid.padx);
		};
		cardImage7.src = displayGraphic(playSurface,6);
	} else {
		var cardImage7 = new Image();
		cardImage7.onload = function() {  
		  ctx.drawImage(cardImage7, cardGrid.col3x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row1y + cardGrid.pos1 - cardGrid.padx);
		  ctx.drawImage(cardImage7, cardGrid.col3x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row1y + cardGrid.pos3 - cardGrid.padx);
		  ctx.drawImage(cardImage7, cardGrid.col3x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row1y + cardGrid.pos5 - cardGrid.padx);
		};	
		cardImage7.src = displayGraphic(playSurface,6);
	};
  };
		
  cardEight = function() {
	//drawing the card frame
	drawCardFrame(selected.card8, cardGrid.col3x, cardGrid.row2y, cardGrid.cardWidth, cardGrid.cardLength);
	//card data
	if (playSurface[7].quantity === 1) {
	  var cardImage8 = new Image();
	  cardImage8.onload = function() {  
		ctx.drawImage(cardImage8, cardGrid.col3x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row2y + cardGrid.pos3 - cardGrid.padx);
	  };
	  cardImage8.src = displayGraphic(playSurface,7);
	} else if (playSurface[7].quantity === 2) {
		var cardImage8 = new Image();
		cardImage8.onload = function() {  
		  ctx.drawImage(cardImage8, cardGrid.col3x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row2y + cardGrid.pos2 - cardGrid.padx);
		  ctx.drawImage(cardImage8, cardGrid.col3x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row2y + cardGrid.pos4 - cardGrid.padx);
		};
		cardImage8.src = displayGraphic(playSurface,7);
	} else {
		var cardImage8 = new Image();
		cardImage8.onload = function() {  
		  ctx.drawImage(cardImage8, cardGrid.col3x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row2y + cardGrid.pos1 - cardGrid.padx);
		  ctx.drawImage(cardImage8, cardGrid.col3x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row2y + cardGrid.pos3 - cardGrid.padx);
		  ctx.drawImage(cardImage8, cardGrid.col3x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row2y + cardGrid.pos5 - cardGrid.padx);
		};	
		cardImage8.src = displayGraphic(playSurface,7);
	};
  };
		
  cardNine = function() {
	//drawing the card frame
	drawCardFrame(selected.card9, cardGrid.col3x, cardGrid.row3y, cardGrid.cardWidth, cardGrid.cardLength);
	//card data
	if (playSurface[8].quantity === 1) {
	  var cardImage9 = new Image();
	  cardImage9.onload = function() {  
		ctx.drawImage(cardImage9, cardGrid.col3x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row3y + cardGrid.pos3 - cardGrid.padx);
	  };
	  cardImage9.src = displayGraphic(playSurface,8);
	} else if (playSurface[8].quantity === 2) {
		var cardImage9 = new Image();
		cardImage9.onload = function() {  
		  ctx.drawImage(cardImage9, cardGrid.col3x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row3y + cardGrid.pos2 - cardGrid.padx);
		  ctx.drawImage(cardImage9, cardGrid.col3x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row3y + cardGrid.pos4 - cardGrid.padx);
		};
		cardImage9.src = displayGraphic(playSurface,8);
	} else {
		var cardImage9 = new Image();
		cardImage9.onload = function() {  
		  ctx.drawImage(cardImage9, cardGrid.col3x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row3y + cardGrid.pos1 - cardGrid.padx);
		  ctx.drawImage(cardImage9, cardGrid.col3x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row3y + cardGrid.pos3 - cardGrid.padx);
		  ctx.drawImage(cardImage9, cardGrid.col3x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row3y + cardGrid.pos5 - cardGrid.padx);
		};	
		cardImage9.src = displayGraphic(playSurface,8);
	};
  };
	
  cardTen = function() {
	//drawing the card frame	  
	drawCardFrame(selected.card10, cardGrid.col4x, cardGrid.row1y, cardGrid.cardWidth, cardGrid.cardLength);
	//card data
	if (playSurface[9].quantity === 1) {
	  var cardImage10 = new Image();
	  cardImage10.onload = function() {  
		ctx.drawImage(cardImage10, cardGrid.col4x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row1y + cardGrid.pos3 - cardGrid.padx);
	  };
	  cardImage10.src = displayGraphic(playSurface,9);
	} else if (playSurface[9].quantity === 2) {
		var cardImage10 = new Image();
		cardImage10.onload = function() {  
		  ctx.drawImage(cardImage10, cardGrid.col4x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row1y + cardGrid.pos2 - cardGrid.padx);
		  ctx.drawImage(cardImage10, cardGrid.col4x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row1y + cardGrid.pos4 - cardGrid.padx);
		};
		cardImage10.src = displayGraphic(playSurface,9);
	} else {
		var cardImage10 = new Image();
		cardImage10.onload = function() {  
		  ctx.drawImage(cardImage10, cardGrid.col4x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row1y + cardGrid.pos1 - cardGrid.padx);
		  ctx.drawImage(cardImage10, cardGrid.col4x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row1y + cardGrid.pos3 - cardGrid.padx);
		  ctx.drawImage(cardImage10, cardGrid.col4x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row1y + cardGrid.pos5 - cardGrid.padx);
		};	
		cardImage10.src = displayGraphic(playSurface,9);
	};
  };
	
  cardEleven = function() {
	//drawing the card frame
	drawCardFrame(selected.card11, cardGrid.col4x, cardGrid.row2y, cardGrid.cardWidth, cardGrid.cardLength);
	//card data
	if (playSurface[10].quantity === 1) {
	  var cardImage11 = new Image();
	  cardImage11.onload = function() {  
		ctx.drawImage(cardImage11, cardGrid.col4x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row2y + cardGrid.pos3 - cardGrid.padx);
	  };
	  cardImage11.src = displayGraphic(playSurface,10);
	} else if (playSurface[10].quantity === 2) {
		var cardImage11 = new Image();
		cardImage11.onload = function() {  
		  ctx.drawImage(cardImage11, cardGrid.col4x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row2y + cardGrid.pos2 - cardGrid.padx);
		  ctx.drawImage(cardImage11, cardGrid.col4x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row2y + cardGrid.pos4 - cardGrid.padx);
		};
		cardImage11.src = displayGraphic(playSurface,10);
	} else {
		var cardImage11 = new Image();
		  cardImage11.onload = function() {  
			ctx.drawImage(cardImage11, cardGrid.col4x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row2y + cardGrid.pos1 - cardGrid.padx);
			ctx.drawImage(cardImage11, cardGrid.col4x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row2y + cardGrid.pos3 - cardGrid.padx);
			ctx.drawImage(cardImage11, cardGrid.col4x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row2y + cardGrid.pos5 - cardGrid.padx);
		  };	
		  cardImage11.src = displayGraphic(playSurface,10);
	};
  };
			
  cardTwelve = function() {
	//drawing the card frame
	drawCardFrame(selected.card12, cardGrid.col4x, cardGrid.row3y, cardGrid.cardWidth, cardGrid.cardLength);
	//card data
	if (playSurface[11].quantity === 1) {
	  var cardImage12 = new Image();
	  cardImage12.onload = function() {  
		ctx.drawImage(cardImage12, cardGrid.col4x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row3y + cardGrid.pos3 - cardGrid.padx);
	  };
      cardImage12.src = displayGraphic(playSurface,11);
	} else if (playSurface[11].quantity === 2) {
		var cardImage12 = new Image();
		cardImage12.onload = function() {  
		  ctx.drawImage(cardImage12, cardGrid.col4x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row3y + cardGrid.pos2 - cardGrid.padx);
		  ctx.drawImage(cardImage12, cardGrid.col4x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row3y + cardGrid.pos4 - cardGrid.padx);
		};
		cardImage12.src = displayGraphic(playSurface,11);
	} else {
		var cardImage12 = new Image();
		cardImage12.onload = function() {  
		  ctx.drawImage(cardImage12, cardGrid.col4x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row3y + cardGrid.pos1 - cardGrid.padx);
		  ctx.drawImage(cardImage12, cardGrid.col4x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row3y + cardGrid.pos3 - cardGrid.padx);
		  ctx.drawImage(cardImage12, cardGrid.col4x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row3y + cardGrid.pos5 - cardGrid.padx);
		};	
		cardImage12.src = displayGraphic(playSurface,11);
	};
  };	
	
  cardThirteen = function() {
	//drawing the card frame
    drawCardFrame(selected.card13, cardGrid.col5x, cardGrid.row1y, cardGrid.cardWidth, cardGrid.cardLength);	
	//card data
	if (playSurface[12].quantity === 1) {
		var cardImage13 = new Image();
		cardImage13.onload = function() {  
		  ctx.drawImage(cardImage13, cardGrid.col5x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row1y + cardGrid.pos3 - cardGrid.padx);
		};
		cardImage13.src = displayGraphic(playSurface,12);
	} else if (playSurface[12].quantity === 2) {
		var cardImage13 = new Image();
		cardImage13.onload = function() {  
		  ctx.drawImage(cardImage13, cardGrid.col5x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row1y + cardGrid.pos2 - cardGrid.padx);
		  ctx.drawImage(cardImage13, cardGrid.col5x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row1y + cardGrid.pos4 - cardGrid.padx);
		};
		cardImage13.src = displayGraphic(playSurface,12);
	} else {
		var cardImage13 = new Image();
		cardImage13.onload = function() {  
		  ctx.drawImage(cardImage13, cardGrid.col5x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row1y + cardGrid.pos1 - cardGrid.padx);
		  ctx.drawImage(cardImage13, cardGrid.col5x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row1y + cardGrid.pos3 - cardGrid.padx);
		  ctx.drawImage(cardImage13, cardGrid.col5x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row1y + cardGrid.pos5 - cardGrid.padx);
		};	
		cardImage13.src = displayGraphic(playSurface,12);
	};
  };
	
  cardFourteen = function() {
	//drawing the card frame
	drawCardFrame(selected.card14, cardGrid.col5x, cardGrid.row2y, cardGrid.cardWidth, cardGrid.cardLength);
	//card data
	if (playSurface[13].quantity === 1) {
	  var cardImage14 = new Image();
		cardImage14.onload = function() {  
		  ctx.drawImage(cardImage14, cardGrid.col5x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row2y + cardGrid.pos3 - cardGrid.padx);
		};
	  cardImage14.src = displayGraphic(playSurface,13);
	} else if (playSurface[13].quantity === 2) {
		var cardImage14 = new Image();
		cardImage14.onload = function() {  
		  ctx.drawImage(cardImage14, cardGrid.col5x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row2y + cardGrid.pos2 - cardGrid.padx);
		  ctx.drawImage(cardImage14, cardGrid.col5x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row2y + cardGrid.pos4 - cardGrid.padx);
		};
		cardImage14.src = displayGraphic(playSurface,13);
	} else {
		var cardImage14 = new Image();
		cardImage14.onload = function() {  
		  ctx.drawImage(cardImage14, cardGrid.col5x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row2y + cardGrid.pos1 - cardGrid.padx);
		  ctx.drawImage(cardImage14, cardGrid.col5x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row2y + cardGrid.pos3 - cardGrid.padx);
		  ctx.drawImage(cardImage14, cardGrid.col5x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row2y + cardGrid.pos5 - cardGrid.padx);
		};	
		cardImage14.src = displayGraphic(playSurface,13);
	};
  };
	
  cardFifteen = function () {
	//drawing the card frame
	drawCardFrame(selected.card15, cardGrid.col5x, cardGrid.row3y, cardGrid.cardWidth, cardGrid.cardLength);
	//card data
	if (playSurface[14].quantity === 1) {
	  var cardImage15 = new Image();
	  cardImage15.onload = function() {  
		ctx.drawImage(cardImage15, cardGrid.col5x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row3y + cardGrid.pos3 - cardGrid.padx);
	  };
	  cardImage15.src = displayGraphic(playSurface,14);
	} else if (playSurface[14].quantity === 2) {
		var cardImage15 = new Image();
		cardImage15.onload = function() {  
		  ctx.drawImage(cardImage15, cardGrid.col5x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row3y + cardGrid.pos2 - cardGrid.padx);
		  ctx.drawImage(cardImage15, cardGrid.col5x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row3y + cardGrid.pos4 - cardGrid.padx);
		};
		cardImage15.src = displayGraphic(playSurface,14);
	} else {
		var cardImage15 = new Image();
		cardImage15.onload = function() {  
		  ctx.drawImage(cardImage15, cardGrid.col5x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row3y + cardGrid.pos1 - cardGrid.padx);
		  ctx.drawImage(cardImage15, cardGrid.col5x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row3y + cardGrid.pos3 - cardGrid.padx);
		  ctx.drawImage(cardImage15, cardGrid.col5x + cardGrid.cardWidth/2 - cardGrid.padx, cardGrid.row3y + cardGrid.pos5 - cardGrid.padx);
		};	
		cardImage15.src = displayGraphic(playSurface,14);
	};
  };
	
	
//If no match in the first 12 we need three more cards.  We should do another check to see
// if there is a match at 15.
// This entire concept should be removed.
// for the video portion of this game we should only display a tableu if there is a set
// 12 cards should be the standard game, 15 an easier version of the game.
 	
  if (playSurface.length === 15) {
    displayed.card13 = "True";
    displayed.card14 = "True";
	  displayed.card15 = "True";
	  cardThirteen();
	  cardFourteen();
	  cardFifteen();
  };

};  // end of create card function

refreshScreen = function () { 

  var TXG = document.getElementById("ctx").getContext("2d");

	cardOne();
	cardTwo();	
	cardThree();	
	cardFour();
	cardFive();
	cardSix();
	cardSeven();
	cardEight();
	cardNine();
	cardTen();
	cardEleven();
	cardTwelve();
	if (playSurface.length === 15) {
		cardThirteen();
		cardFourteen();
		cardFifteen();
	};

  TXG.beginPath();
  TXG.fillRect(530, 88, 80 , 120);
  TXG.clearRect(532, 90, 76 , 116);
  TXG.fillRect(524, 94, 80 , 120);
  TXG.clearRect(526, 96, 76 , 116);
  TXG.fillRect(518, 100, 80 , 120);
  TXG.clearRect(520, 102, 76 , 116);
  TXG.fillText("Draw Deck", 530, 140);
  TXG.fillText("Cards Left:", 530, 160);
  TXG.fillText(playDeck.length, 530, 180); 
  TXG.stroke();
  TXG.closePath();

};	
// Call our Functions
//Create the deck
var masterDeck = createDeck();

//Shuffle the deck
var playDeck = shuffleDeck(masterDeck);

// Deal the cards
var playSurface = createTable(playDeck);

// Make sure we have at least one set to start with
playSurface = startGame(playSurface, playDeck);
// Creating game UI Elements
createGameUI();

createCard(playSurface);

refreshScreen();

// For debug purposes

//  Checking that the playdeck is a shuffled version of the master deck

//var m = 0;

//for (let i = 0; i < playDeck.length; i++) {
//  console.log((m+1) + " " + playDeck[m].symbol + ", "+ playDeck[m].color + ", "+ playDeck[m].shading + ", "+ playDeck[m].quantity);
//  console.log((m+1) + " " + masterDeck[m]);
//  m++;
//}


// Checking that the "dealt" cards are correct
//var n = 0; 
//for (let i = 0; i < playSurface.length; i++) {
    //    		console.log((n+1) + " " + playSurface[n].symbol + ", "+ playSurface[n].color + ", "+ playSurface[n].shading + ", "+ playSurface[n].quantity);
	//				n++;
//			}
//

</script>
</body>
</html>